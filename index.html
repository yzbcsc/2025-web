<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è‹±è¯­å•è¯å­¦ä¹ </title>

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è‹±è¯­å•è¯å­¦ä¹ </title>
    <style>
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            max-width: 100%;
            margin: 0;
            padding: 10px;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.5;
            touch-action: manipulation;
        }
        .container {
            background-color: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
        }
        h1 {
            color: #4a6ea9;
            text-align: center;
            margin: 10px 0 20px;
            font-size: 1.5rem;
        }
        .word-display {
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            margin: 15px 0;
            color: #2c3e50;
            word-break: break-all;
        }
        .meaning {
            font-size: 1.1rem;
            text-align: center;
            margin-bottom: 15px;
            color: #7f8c8d;
        }
        .example {
            background-color: #e8f4fc;
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 8px;
            font-style: italic;
            font-size: 0.95rem;
        }
        .example-meaning {
            background-color: #e8f4fc;
            padding: 5px 12px 12px;
            border-radius: 0 0 10px 10px;
            margin-bottom: 15px;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        button {
            background-color: #4a6ea9;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            width: 100%;
            margin: 8px 0;
            transition: all 0.2s;
            -webkit-appearance: none;
            user-select: none;
        }
        button:active {
            transform: scale(0.98);
        }
        button:hover {
            background-color: #3a5a8f;
        }
        .progress-container {
            margin: 15px 0;
            background-color: #ecf0f1;
            border-radius: 10px;
            height: 8px;
        }
        .progress-bar {
            height: 100%;
            border-radius: 10px;
            background-color: #4a6ea9;
            width: 0%;
            transition: width 0.5s;
        }
        .stats {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 0.85rem;
            color: #7f8c8d;
        }
        .hidden {
            display: none;
        }
        .dictation-input {
            width: 100%;
            padding: 10px;
            font-size: 1rem;
            text-align: center;
            margin: 12px 0 8px;
            border-radius: 8px;
            border: 2px solid #ddd;
            height: 42px;
            -webkit-appearance: none;
        }
        .dictation-result {
            font-size: 1rem;
            text-align: center;
            margin: 8px 0;
            min-height: 24px;
        }
        .mode-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }
        .mode-btn {
            background-color: #ecf0f1;
            color: #2c3e50;
            padding: 12px;
            font-size: 1rem;
        }
        .mode-btn.active {
            background-color: #4a6ea9;
            color: white;
        }
        .settings {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }
        select, input {
            width: 100%;
            padding: 10px;
            margin-bottom: 12px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-size: 1rem;
            -webkit-appearance: none;
        }
        textarea {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-size: 0.95rem;
            min-height: 150px;
            margin-bottom: 10px;
        }
        .auto-play-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 10px;
        }
        .auto-play-btn {
            width: 100%;
            padding: 10px;
        }
        .back-btn {
            background-color: #95a5a6;
            margin-top: 15px;
        }
        .correct-answer {
            margin-top: 10px;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 8px;
            text-align: center;
            font-size: 0.95rem;
        }
        .voice-input-container {
            margin-bottom: 12px;
        }
        .voice-input-btn {
            width: 100%;
            padding: 12px;
            background-color: #4a6ea9;
            transition: all 0.2s;
            font-size: 1rem;
            position: relative;
        }
        .voice-input-btn.recording {
            background-color: #e74c3c;
            transform: scale(0.98);
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.3);
        }
        .voice-input-btn.recording::after {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            background-color: rgba(255,255,255,0.3);
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(3); opacity: 0; }
        }
        .voice-input-status {
            font-size: 0.85rem;
            color: #7f8c8d;
            text-align: center;
            margin-top: 4px;
            min-height: 18px;
        }
        .voice-input-hint {
            font-size: 0.75rem;
            color: #7f8c8d;
            text-align: center;
            margin: 4px 0 12px;
        }
        .permission-error {
            color: #e74c3c;
            text-align: center;
            margin: 10px 0;
            font-size: 0.85rem;
            padding: 8px;
            background-color: #fde8e8;
            border-radius: 8px;
        }
        .mobile-tip {
            font-size: 0.75rem;
            color: #7f8c8d;
            text-align: center;
            margin: 4px 0 12px;
        }
        .apk-warning {
            background-color: #fff3cd;
            color: #856404;
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            text-align: center;
            font-size: 0.85rem;
        }
        .apk-solution {
            background-color: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            font-size: 0.85rem;
        }
        .next-group-btn {
            background-color: #9b59b6;
            margin-top: 10px;
        }
        .next-group-btn:hover {
            background-color: #8e44ad;
        }
        .add-word-form {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 10px;
        }
        .form-row {
            margin-bottom: 12px;
        }
        .form-row label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .form-control {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-size: 1rem;
        }
        .form-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }
        .word-exists-notice {
            color: #e74c3c;
            margin-top: 5px;
            font-size: 0.85rem;
        }
        .word-added-notice {
            color: #2ecc71;
            margin-top: 5px;
            font-size: 0.85rem;
        }
    </style>
</head>
<body>
    <!-- HTMLå†…å®¹ä¸ä¹‹å‰æä¾›çš„å®Œå…¨ç›¸åŒï¼Œä¿æŒç»“æ„ä¸å˜ -->
    <!-- JavaScriptå†…å®¹ä¸ä¹‹å‰æä¾›çš„å®Œå…¨ç›¸åŒï¼Œä¿æŒåŠŸèƒ½ä¸å˜ -->
</body>
</html>

</head>
<body>
    <div class="container">
        <h1>è‹±è¯­å•è¯å­¦ä¹ </h1>
        
        <div id="apk-warning" class="apk-warning hidden">
            æ³¨æ„ï¼šåœ¨APKä¸­è¯­éŸ³åŠŸèƒ½å¯èƒ½å—é™ï¼Œå»ºè®®ä½¿ç”¨Chromeæµè§ˆå™¨è®¿é—®ç½‘é¡µç‰ˆ
        </div>
        
        <div id="apk-solution" class="apk-solution hidden">
            è§£å†³æ–¹æ¡ˆï¼š<br>
            1. è¯·ç¡®ä¿å·²æˆäºˆéº¦å…‹é£æƒé™<br>
            2. å°è¯•ä½¿ç”¨è€³æœº<br>
            3. ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æµ‹è¯•è¯­éŸ³åŠŸèƒ½
            <button id="test-voice-btn" style="margin-top:10px;">æµ‹è¯•è¯­éŸ³åŠŸèƒ½</button>
            <div id="test-result"></div>
        </div>
        
        <div id="welcome-screen">
            <div class="mode-selector">
                <button class="mode-btn active" id="learn-mode-btn">å­¦ä¹ æ¨¡å¼</button>
                <button class="mode-btn" id="dictation-mode-btn">å¬å†™æ¨¡å¼</button>
            </div>
            
            <p>æ¯ç»„å­¦ä¹ <span id="new-words-count">10</span>ä¸ªæ–°å•è¯ï¼Œå¤ä¹ <span id="review-words-count">20</span>ä¸ªå•è¯ã€‚</p>
            <button id="start-btn">å¼€å§‹å­¦ä¹ </button>
            <button class="next-group-btn" id="next-group-btn">ä¸‹ä¸€ç»„å•è¯</button>
            
            <div class="settings">
                <h3>è®¾ç½®</h3>
                <label>æ¯ç»„æ–°å•è¯æ•°é‡ï¼š</label>
                <input type="number" id="new-words-per-day" min="1" max="50" value="10">
                
                <label>æ¯ç»„å¤ä¹ å•è¯æ•°é‡ï¼š</label>
                <input type="number" id="review-words-per-day" min="1" max="50" value="20">
                
                <label>é€‰æ‹©è¯åº“ï¼š</label>
                <select id="word-library">
                    <option value="custom">è‡ªå®šä¹‰è¯åº“</option>
                    <option value="default">é»˜è®¤è¯åº“</option>
                </select>
                
                <div class="add-word-form">
                    <h3>æ·»åŠ /æ›´æ–°å•è¯</h3>
                    <div class="form-row">
                        <label for="new-word">è‹±æ–‡å•è¯</label>
                        <input type="text" id="new-word" class="form-control" placeholder="è¾“å…¥è‹±æ–‡å•è¯">
                    </div>
                    <div class="form-row">
                        <label for="new-meaning">ä¸­æ–‡é‡Šä¹‰</label>
                        <input type="text" id="new-meaning" class="form-control" placeholder="è¾“å…¥ä¸­æ–‡æ„æ€">
                    </div>
                    <div class="form-row">
                        <label for="new-example">ä¾‹å¥ (å¯é€‰)</label>
                        <input type="text" id="new-example" class="form-control" placeholder="è¾“å…¥ä¾‹å¥">
                    </div>
                    <div class="form-row">
                        <label for="new-example-meaning">ä¾‹å¥ç¿»è¯‘ (å¯é€‰)</label>
                        <input type="text" id="new-example-meaning" class="form-control" placeholder="è¾“å…¥ä¾‹å¥ç¿»è¯‘">
                    </div>
                    <div id="word-notice" class="hidden"></div>
                    <div class="form-actions">
                        <button id="check-word-btn">æ£€æŸ¥å•è¯</button>
                        <button id="add-word-btn">æ·»åŠ /æ›´æ–°</button>
                    </div>
                </div>
                
                <div id="custom-library-container">
                    <label>è‡ªå®šä¹‰è¯åº“å†…å®¹ï¼š</label>
                    <textarea id="custom-library" rows="6" placeholder="apple,è‹¹æœ,I eat an apple every day.,æˆ‘æ¯å¤©åƒä¸€ä¸ªè‹¹æœã€‚"></textarea>
                    <button id="save-library-btn">ä¿å­˜è¯åº“</button>
                </div>
            </div>
        </div>
        
        <div id="learning-screen" class="hidden">
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            <div class="stats">
                <span id="progress-text">0/10</span>
                <span id="mode-text">å­¦ä¹ æ–°å•è¯</span>
            </div>
            
            <div id="learn-content">
                <div class="word-display" id="word-display"></div>
                <div class="meaning" id="meaning"></div>
                <div class="example" id="example"></div>
                <div class="example-meaning" id="example-meaning"></div>
                
                <div class="auto-play-controls">
                    <button class="auto-play-btn" id="auto-play-btn">è‡ªåŠ¨æœ—è¯»</button>
                    <button class="auto-play-btn" id="speak-btn">æœ—è¯»å•è¯</button>
                </div>
                <button id="next-btn">ä¸‹ä¸€ä¸ªå•è¯</button>
                <button class="back-btn" id="learn-back-btn">è¿”å›</button>
            </div>
            
            <div id="dictation-content" class="hidden">
                <div class="word-display hidden" id="dictation-word-display"></div>
                <div class="meaning hidden" id="dictation-meaning"></div>
                
                <div id="dictation-play-status">æ­£åœ¨æœ—è¯»å•è¯...</div>
                
                <div id="voice-permission-error" class="permission-error hidden"></div>
                
                <div class="voice-input-container">
                    <button class="voice-input-btn" id="voice-input-btn">ğŸ¤ æŒ‰ä½è¯´è¯ï¼ˆ3ç§’ï¼‰</button>
                    <div class="voice-input-status" id="voice-input-status"></div>
                    <div class="voice-input-hint">æŒ‰ä½æŒ‰é’®è¯´è¯ï¼Œæ¾å¼€è‡ªåŠ¨è¯†åˆ«</div>
                    <div class="mobile-tip">(æ‰‹æœºç”¨æˆ·å»ºè®®ä½¿ç”¨è€³æœºè·å¾—æ›´å¥½æ•ˆæœ)</div>
                </div>
                
                <input type="text" class="dictation-input" id="dictation-input" placeholder="è¯·è¾“å…¥å¬åˆ°çš„å•è¯" autocomplete="off">
                <button id="check-spelling-btn">æ£€æŸ¥æ‹¼å†™</button>
                <div class="dictation-result" id="dictation-result"></div>
                <div class="correct-answer hidden" id="correct-answer"></div>
                <button class="back-btn" id="dictation-back-btn">è¿”å›</button>
            </div>
        </div>
        
        <div id="completion-screen" class="hidden">
            <h2>æœ¬ç»„å­¦ä¹ å®Œæˆï¼</h2>
            <p>æœ¬ç»„å­¦ä¹ äº† <span id="new-learned-count">0</span> ä¸ªæ–°å•è¯ï¼Œå¤ä¹ äº† <span id="reviewed-count">0</span> ä¸ªå•è¯ã€‚</p>
            <button id="restart-btn">å†æ¥ä¸€ç»„</button>
            <button class="next-group-btn" id="completion-next-group-btn">ä¸‹ä¸€ç»„å•è¯</button>
            <button class="back-btn" id="completion-back-btn">è¿”å›</button>
        </div>
    </div>

    <script>
        // é»˜è®¤è¯åº“ - æ ¹æ®ç”¨æˆ·æä¾›çš„å•è¯æ•´ç†
        const defaultLibrary = [
            {word: "word", meaning: "æ–‡å­—ã€å•è¯", example: "This is a new word.", exampleMeaning: "è¿™æ˜¯ä¸€ä¸ªæ–°å•è¯"},
            {word: "light", meaning: "ç¯", example: "Turn on the light.", exampleMeaning: "æ‰“å¼€ç¯"},
            {word: "door", meaning: "é—¨", example: "Close the door.", exampleMeaning: "å…³ä¸Šé—¨"},
            {word: "window", meaning: "çª—æˆ·", example: "Open the window.", exampleMeaning: "æ‰“å¼€çª—æˆ·"},
            {word: "radio", meaning: "æ”¶éŸ³æœº", example: "I listen to the radio.", exampleMeaning: "æˆ‘å¬æ”¶éŸ³æœº"},
            {word: "ruler", meaning: "å°ºå­", example: "Use a ruler to draw a line.", exampleMeaning: "ç”¨å°ºå­ç”»ä¸€æ¡çº¿"},
            {word: "crayon", meaning: "èœ¡ç¬”", example: "The child is drawing with crayons.", exampleMeaning: "å­©å­æ­£åœ¨ç”¨èœ¡ç¬”ç”»ç”»"},
            {word: "marker", meaning: "æ ‡è®°", example: "Use a marker to highlight.", exampleMeaning: "ç”¨æ ‡è®°ç¬”é«˜äº®"},
            {word: "computer", meaning: "ç”µè„‘", example: "I work on my computer.", exampleMeaning: "æˆ‘åœ¨ç”µè„‘ä¸Šå·¥ä½œ"},
            {word: "glass", meaning: "æ°´æ¯", example: "A glass of water.", exampleMeaning: "ä¸€æ¯æ°´"},
            {word: "water", meaning: "æ°´", example: "Drink more water.", exampleMeaning: "å¤šå–æ°´"},
            {word: "shoes", meaning: "é‹", example: "Put on your shoes.", exampleMeaning: "ç©¿ä¸Šä½ çš„é‹"},
            {word: "slippers", meaning: "æ‹–é‹", example: "Wear slippers at home.", exampleMeaning: "åœ¨å®¶ç©¿æ‹–é‹"},
            {word: "boots", meaning: "é´å­", example: "Winter boots keep feet warm.", exampleMeaning: "å†¬é´è®©è„šä¿æŒæ¸©æš–"},
            {word: "yellow cap", meaning: "é»„è‰²çš„å¸½å­", example: "He wears a yellow cap.", exampleMeaning: "ä»–æˆ´ç€ä¸€é¡¶é»„è‰²çš„å¸½å­"},
            {word: "shorts", meaning: "çŸ­è£¤", example: "It's hot, wear shorts.", exampleMeaning: "å¤©çƒ­ï¼Œç©¿çŸ­è£¤"},
            {word: "overcoat", meaning: "å¤§è¡£", example: "Put on your overcoat.", exampleMeaning: "ç©¿ä¸Šä½ çš„å¤§è¡£"},
            {word: "sneakers", meaning: "è¿åŠ¨é‹", example: "Running sneakers are comfortable.", exampleMeaning: "è·‘æ­¥è¿åŠ¨é‹å¾ˆèˆ’é€‚"},
            {word: "sandals", meaning: "å‡‰é‹", example: "Sandals are good for summer.", exampleMeaning: "å‡‰é‹é€‚åˆå¤å¤©"},
            {word: "trousers", meaning: "è£¤å­", example: "These trousers are too long.", exampleMeaning: "è¿™æ¡è£¤å­å¤ªé•¿äº†"},
            {word: "jacket", meaning: "å¤¹å…‹è¡«", example: "A leather jacket looks cool.", exampleMeaning: "çš®å¤¹å…‹çœ‹èµ·æ¥å¾ˆé…·"},
            {word: "bag", meaning: "åŒ…", example: "This is my school bag.", exampleMeaning: "è¿™æ˜¯æˆ‘çš„ä¹¦åŒ…"},
            {word: "bus", meaning: "å…¬å…±æ±½è½¦", example: "Take the bus to school.", exampleMeaning: "ä¹˜å…¬å…±æ±½è½¦å»å­¦æ ¡"},
            {word: "juice", meaning: "æœæ±", example: "Orange juice is my favorite.", exampleMeaning: "æ©™æ±æ˜¯æˆ‘çš„æœ€çˆ±"},
            {word: "milk", meaning: "ç‰›å¥¶", example: "Drink milk every day.", exampleMeaning: "æ¯å¤©å–ç‰›å¥¶"},
            {word: "a glass of", meaning: "ä¸€æ¯", example: "A glass of milk.", exampleMeaning: "ä¸€æ¯ç‰›å¥¶"},
            {word: "soup", meaning: "æ±¤", example: "Chicken soup is delicious.", exampleMeaning: "é¸¡æ±¤å¾ˆç¾å‘³"},
            {word: "fish", meaning: "é±¼è‚‰", example: "I like to eat fish.", exampleMeaning: "æˆ‘å–œæ¬¢åƒé±¼"},
            {word: "pizza", meaning: "æŠ«è¨", example: "Let's order a pizza.", exampleMeaning: "æˆ‘ä»¬ç‚¹ä¸ªæŠ«è¨å§"},
            {word: "chips", meaning: "ç‚¸è–¯æ¡", example: "French chips are crispy.", exampleMeaning: "ç‚¸è–¯æ¡å¾ˆè„†"},
            {word: "sandwich", meaning: "ä¸‰æ˜æ²»", example: "A ham sandwich for lunch.", exampleMeaning: "åˆé¤åƒç«è…¿ä¸‰æ˜æ²»"},
            {word: "money", meaning: "é’±", example: "Save your money.", exampleMeaning: "å­˜é’±"},
            {word: "change", meaning: "é›¶é’±", example: "Here's your change.", exampleMeaning: "è¿™æ˜¯ä½ çš„é›¶é’±"},
            {word: "ice", meaning: "å†°", example: "Put some ice in the drink.", exampleMeaning: "åœ¨é¥®æ–™é‡ŒåŠ äº›å†°"},
            {word: "book", meaning: "ä¹¦", example: "Read a book every day.", exampleMeaning: "æ¯å¤©è¯»ä¸€æœ¬ä¹¦"},
            {word: "pen", meaning: "é’¢ç¬”", example: "Write with a pen.", exampleMeaning: "ç”¨é’¢ç¬”å†™å­—"},
            {word: "shoe", meaning: "é‹", example: "One shoe is missing.", exampleMeaning: "ä¸€åªé‹ä¸è§äº†"},
            {word: "shop", meaning: "å•†åº—", example: "Go to the shop.", exampleMeaning: "å»å•†åº—"},
            {word: "duck", meaning: "é¸­å­", example: "The duck is swimming.", exampleMeaning: "é¸­å­åœ¨æ¸¸æ³³"},
            {word: "dog", meaning: "ç‹—", example: "The dog is barking.", exampleMeaning: "ç‹—åœ¨å«"},
            {word: "cat", meaning: "çŒ«", example: "The cat is sleeping.", exampleMeaning: "çŒ«åœ¨ç¡è§‰"},
            {word: "open", meaning: "æ‰“å¼€", example: "Open the book.", exampleMeaning: "æ‰“å¼€ä¹¦"},
            {word: "close", meaning: "å…³é—­", example: "Close the window.", exampleMeaning: "å…³çª—"},
            {word: "hold", meaning: "æ‹¿", example: "Hold my hand.", exampleMeaning: "æ¡ä½æˆ‘çš„æ‰‹"},
            {word: "borrow", meaning: "å€Ÿç”¨", example: "Can I borrow your pen?", exampleMeaning: "æˆ‘èƒ½å€Ÿç”¨ä½ çš„é’¢ç¬”å—ï¼Ÿ"},
            {word: "take", meaning: "ç”¨,æ‹¿åˆ°", example: "Take an umbrella.", exampleMeaning: "æ‹¿æŠŠä¼"},
            {word: "sell", meaning: "å–", example: "He sells fruits.", exampleMeaning: "ä»–å–æ°´æœ"},
            {word: "buy", meaning: "ä¹°", example: "I want to buy a book.", exampleMeaning: "æˆ‘æƒ³ä¹°æœ¬ä¹¦"},
            {word: "order", meaning: "ç‚¹é¤", example: "Let's order some food.", exampleMeaning: "æˆ‘ä»¬ç‚¹äº›é£Ÿç‰©å§"},
            {word: "cook", meaning: "å¨å¸ˆ", example: "My father is a cook.", exampleMeaning: "æˆ‘çˆ¸çˆ¸æ˜¯å¨å¸ˆ"},
            {word: "fly", meaning: "é£", example: "Birds can fly.", exampleMeaning: "é¸Ÿä¼šé£"},
            {word: "grow", meaning: "ç”Ÿé•¿", example: "Plants grow fast.", exampleMeaning: "æ¤ç‰©é•¿å¾—å¾ˆå¿«"},
            {word: "live", meaning: "å±…ä½,ç”Ÿå­˜", example: "I live in Beijing.", exampleMeaning: "æˆ‘ä½åœ¨åŒ—äº¬"},
            {word: "visit", meaning: "æ‹œè®¿", example: "Visit your grandparents.", exampleMeaning: "æ‹œè®¿ä½ çš„ç¥–çˆ¶æ¯"},
            {word: "mind", meaning: "ä»‹æ„", example: "Do you mind if I sit here?", exampleMeaning: "ä½ ä»‹æ„æˆ‘åè¿™é‡Œå—ï¼Ÿ"},
            {word: "clever", meaning: "èªæ˜çš„", example: "She is a clever girl.", exampleMeaning: "å¥¹æ˜¯ä¸ªèªæ˜çš„å¥³å­©"},
            {word: "feeling", meaning: "æ„Ÿå—", example: "How are you feeling?", exampleMeaning: "ä½ æ„Ÿè§‰å¦‚ä½•ï¼Ÿ"},
            {word: "kind", meaning: "å–„è‰¯çš„,ç§ç±»", example: "She is very kind.", exampleMeaning: "å¥¹å¾ˆå–„è‰¯"},
            {word: "think", meaning: "è®¤ä¸º", example: "I think it's good.", exampleMeaning: "æˆ‘è®¤ä¸ºè¿™å¾ˆå¥½"},
            {word: "sweet", meaning: "ç”œçš„", example: "The cake is too sweet.", exampleMeaning: "è›‹ç³•å¤ªç”œäº†"},
            {word: "sour", meaning: "é…¸çš„", example: "Lemons are sour.", exampleMeaning: "æŸ æª¬æ˜¯é…¸çš„"},
            {word: "hot", meaning: "çƒ­çš„", example: "The soup is hot.", exampleMeaning: "æ±¤å¾ˆçƒ­"},
            {word: "rain", meaning: "ä¸‹é›¨", example: "It's going to rain.", exampleMeaning: "è¦ä¸‹é›¨äº†"},
            {word: "raining", meaning: "é›¨", example: "It's raining outside.", exampleMeaning: "å¤–é¢åœ¨ä¸‹é›¨"},
            {word: "snow", meaning: "é›ª", example: "It snows in winter.", exampleMeaning: "å†¬å¤©ä¸‹é›ª"},
            {word: "snowing", meaning: "ä¸‹é›ª", example: "It's snowing heavily.", exampleMeaning: "é›ªä¸‹å¾—å¾ˆå¤§"},
            {word: "weather", meaning: "å¤©æ°”", example: "What's the weather like?", exampleMeaning: "å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"},
            {word: "farm", meaning: "å†œåœº", example: "We visited a farm.", exampleMeaning: "æˆ‘ä»¬å‚è§‚äº†ä¸€ä¸ªå†œåœº"},
            {word: "lake", meaning: "æ¹–", example: "Let's go to the lake.", exampleMeaning: "æˆ‘ä»¬å»æ¹–è¾¹å§"},
            {word: "park", meaning: "å…¬å›­", example: "Children play in the park.", exampleMeaning: "å­©å­ä»¬åœ¨å…¬å›­é‡Œç©"},
            {word: "forest", meaning: "æ£®æ—", example: "There are many trees in the forest.", exampleMeaning: "æ£®æ—é‡Œæœ‰å¾ˆå¤šæ ‘"},
            {word: "nature", meaning: "å¤§è‡ªç„¶", example: "We should protect nature.", exampleMeaning: "æˆ‘ä»¬åº”è¯¥ä¿æŠ¤å¤§è‡ªç„¶"},
            {word: "air", meaning: "ç©ºæ°”", example: "Fresh air is good for health.", exampleMeaning: "æ–°é²œç©ºæ°”å¯¹å¥åº·æœ‰ç›Š"},
            {word: "season", meaning: "å­£èŠ‚", example: "Spring is my favorite season.", exampleMeaning: "æ˜¥å¤©æ˜¯æˆ‘æœ€å–œæ¬¢çš„å­£èŠ‚"},
            {word: "place", meaning: "åœ°ç‚¹", example: "This is a nice place.", exampleMeaning: "è¿™æ˜¯ä¸ªå¥½åœ°æ–¹"},
            {word: "colour", meaning: "é¢œè‰²", example: "What colour do you like?", exampleMeaning: "ä½ å–œæ¬¢ä»€ä¹ˆé¢œè‰²ï¼Ÿ"},
            {word: "shape", meaning: "å½¢çŠ¶", example: "The shape is round.", exampleMeaning: "å½¢çŠ¶æ˜¯åœ†çš„"},
            {word: "red", meaning: "çº¢è‰²", example: "The apple is red.", exampleMeaning: "è‹¹æœæ˜¯çº¢è‰²çš„"},
            {word: "green", meaning: "ç»¿è‰²", example: "Leaves are green.", exampleMeaning: "å¶å­æ˜¯ç»¿è‰²çš„"},
            {word: "brown", meaning: "æ£•è‰²", example: "The table is brown.", exampleMeaning: "æ¡Œå­æ˜¯æ£•è‰²çš„"},
            {word: "black", meaning: "é»‘è‰²", example: "The cat is black.", exampleMeaning: "çŒ«æ˜¯é»‘è‰²çš„"},
            {word: "white", meaning: "ç™½è‰²", example: "Snow is white.", exampleMeaning: "é›ªæ˜¯ç™½è‰²çš„"},
            {word: "favour", meaning: "å¸®å¿™", example: "Can you do me a favour?", exampleMeaning: "ä½ èƒ½å¸®æˆ‘ä¸ªå¿™å—ï¼Ÿ"},
            {word: "pair", meaning: "åŒ", example: "A pair of shoes.", exampleMeaning: "ä¸€åŒé‹"},
            {word: "this", meaning: "è¿™ä¸ª", example: "This is my book.", exampleMeaning: "è¿™æ˜¯æˆ‘çš„ä¹¦"},
            {word: "that", meaning: "é‚£ä¸ª", example: "That is your pen.", exampleMeaning: "é‚£æ˜¯ä½ çš„é’¢ç¬”"},
            {word: "these", meaning: "è¿™äº›", example: "These are apples.", exampleMeaning: "è¿™äº›æ˜¯è‹¹æœ"},
            {word: "those", meaning: "é‚£äº›", example: "Those are oranges.", exampleMeaning: "é‚£äº›æ˜¯æ©™å­"},
            {word: "which", meaning: "å“ªä¸€ä¸ª", example: "Which one do you want?", exampleMeaning: "ä½ æƒ³è¦å“ªä¸€ä¸ªï¼Ÿ"},
            {word: "big", meaning: "å¤§çš„", example: "This is a big house.", exampleMeaning: "è¿™æ˜¯ä¸ªå¤§æˆ¿å­"},
            {word: "without", meaning: "æ²¡æœ‰", example: "I can't live without water.", exampleMeaning: "æ²¡æœ‰æ°´æˆ‘æ— æ³•ç”Ÿå­˜"},
            {word: "food", meaning: "é£Ÿç‰©", example: "We need food to live.", exampleMeaning: "æˆ‘ä»¬éœ€è¦é£Ÿç‰©æ¥ç”Ÿå­˜"},
            {word: "week", meaning: "æ˜ŸæœŸ", example: "There are seven days in a week.", exampleMeaning: "ä¸€å‘¨æœ‰ä¸ƒå¤©"},
            {word: "month", meaning: "æœˆ", example: "January is the first month.", exampleMeaning: "ä¸€æœˆæ˜¯ç¬¬ä¸€ä¸ªæœˆ"},
            {word: "clothes", meaning: "æœè£…", example: "Put on clean clothes.", exampleMeaning: "ç©¿ä¸Šå¹²å‡€çš„è¡£æœ"},
            {word: "subject", meaning: "ç§‘ç›®", example: "Math is my favorite subject.", exampleMeaning: "æ•°å­¦æ˜¯æˆ‘æœ€å–œæ¬¢çš„ç§‘ç›®"},
            {word: "farmer", meaning: "å†œæ°‘", example: "The farmer grows crops.", exampleMeaning: "å†œæ°‘ç§æ¤åº„ç¨¼"},
            {word: "teacher", meaning: "è€å¸ˆ", example: "Our teacher is kind.", exampleMeaning: "æˆ‘ä»¬çš„è€å¸ˆå¾ˆå’Œè”¼"},
            {word: "doctor", meaning: "åŒ»ç”Ÿ", example: "See a doctor when you're sick.", exampleMeaning: "ç”Ÿç—…æ—¶å»çœ‹åŒ»ç”Ÿ"},
            {word: "pilot", meaning: "é£è¡Œå‘˜", example: "My uncle is a pilot.", exampleMeaning: "æˆ‘å”å”æ˜¯é£è¡Œå‘˜"},
            {word: "barber", meaning: "ç†å‘å¸ˆ", example: "Go to the barber for a haircut.", exampleMeaning: "å»ç†å‘å¸ˆé‚£é‡Œç†å‘"},
            {word: "music", meaning: "éŸ³ä¹", example: "I like listening to music.", exampleMeaning: "æˆ‘å–œæ¬¢å¬éŸ³ä¹"},
            {word: "like...best", meaning: "æœ€å–œæ¬¢", example: "I like apples best.", exampleMeaning: "æˆ‘æœ€å–œæ¬¢è‹¹æœ"},
            {word: "song", meaning: "æ­Œæ›²", example: "This is a beautiful song.", exampleMeaning: "è¿™æ˜¯ä¸€é¦–ç¾å¦™çš„æ­Œæ›²"},
            {word: "make model planes", meaning: "åˆ¶ä½œé£æœºæ¨¡å‹", example: "He likes making model planes.", exampleMeaning: "ä»–å–œæ¬¢åˆ¶ä½œé£æœºæ¨¡å‹"},
            {word: "after school", meaning: "æ”¾å­¦å", example: "We play football after school.", exampleMeaning: "æˆ‘ä»¬æ”¾å­¦åè¸¢è¶³çƒ"},
            {word: "after work", meaning: "ä¸‹ç­å", example: "Let's meet after work.", exampleMeaning: "æˆ‘ä»¬ä¸‹ç­åè§"},
            {word: "noisy", meaning: "åµé—¹çš„", example: "The classroom is noisy.", exampleMeaning: "æ•™å®¤å¾ˆåµé—¹"},
            {word: "quiet", meaning: "å®‰é™çš„", example: "Please be quiet.", exampleMeaning: "è¯·å®‰é™"},
            {word: "turtle", meaning: "ä¹Œé¾Ÿ", example: "The turtle walks slowly.", exampleMeaning: "ä¹Œé¾Ÿèµ°å¾—å¾ˆæ…¢"},
            {word: "fever", meaning: "å‘çƒ§", example: "I have a fever.", exampleMeaning: "æˆ‘å‘çƒ§äº†"},
            {word: "need", meaning: "éœ€è¦", example: "I need some water.", exampleMeaning: "æˆ‘éœ€è¦ä¸€äº›æ°´"},
            {word: "headache", meaning: "å¤´ç—›", example: "She has a headache.", exampleMeaning: "å¥¹å¤´ç—›"},
            {word: "feel", meaning: "æ„Ÿå—åˆ°", example: "I feel happy.", exampleMeaning: "æˆ‘æ„Ÿåˆ°é«˜å…´"},
            {word: "wrong", meaning: "æœ‰æ¯›ç—…çš„ã€æœ‰é—®é¢˜çš„", example: "Something is wrong.", exampleMeaning: "æœ‰äº›ä¸å¯¹åŠ²"},
            {word: "the flu", meaning: "æµæ„Ÿ", example: "He has the flu.", exampleMeaning: "ä»–å¾—äº†æµæ„Ÿ"},
            {word: "a cough", meaning: "å’³å—½", example: "I have a cough.", exampleMeaning: "æˆ‘å’³å—½"},
            {word: "pill", meaning: "è¯", example: "Take this pill.", exampleMeaning: "åƒä¸‹è¿™ç‰‡è¯"},
            {word: "mouth", meaning: "å˜´", example: "Open your mouth.", exampleMeaning: "å¼ å¼€å˜´"},
            {word: "a sore throat", meaning: "å—“å­ç—›", example: "I have a sore throat.", exampleMeaning: "æˆ‘å—“å­ç—›"},
            {word: "has", meaning: "æœ‰", example: "She has a book.", exampleMeaning: "å¥¹æœ‰ä¸€æœ¬ä¹¦"},
            {word: "have", meaning: "æœ‰", example: "I have a pen.", exampleMeaning: "æˆ‘æœ‰ä¸€æ”¯é’¢ç¬”"},
            {word: "high", meaning: "é«˜çš„", example: "The mountain is high.", exampleMeaning: "å±±å¾ˆé«˜"},
            {word: "bad", meaning: "ä¸¥é‡çš„", example: "He has a bad cold.", exampleMeaning: "ä»–å¾—äº†é‡æ„Ÿå†’"},
            {word: "matter", meaning: "äº‹æƒ… é—®é¢˜", example: "What's the matter?", exampleMeaning: "æ€ä¹ˆäº†ï¼Ÿ"},
            {word: "hurt", meaning: "å—ä¼¤ ç–¼ç—›", example: "My leg hurts.", exampleMeaning: "æˆ‘çš„è…¿ç–¼"},
            {word: "walk", meaning: "èµ°è·¯", example: "I walk to school.", exampleMeaning: "æˆ‘èµ°è·¯å»å­¦æ ¡"},
            {word: "knee", meaning: "è†ç›–", example: "My knee is injured.", exampleMeaning: "æˆ‘çš„è†ç›–å—ä¼¤äº†"},
            {word: "leg", meaning: "è…¿", example: "He broke his leg.", exampleMeaning: "ä»–æ‘”æ–­äº†è…¿"},
            {word: "right", meaning: "å³", example: "Turn right.", exampleMeaning: "å‘å³è½¬"},
            {word: "left", meaning: "å·¦", example: "Turn left.", exampleMeaning: "å‘å·¦è½¬"},
            {word: "arm", meaning: "èƒ³è†Š", example: "Raise your arm.", exampleMeaning: "æŠ¬èµ·ä½ çš„èƒ³è†Š"},
            {word: "finger", meaning: "æ‰‹æŒ‡", example: "He cut his finger.", exampleMeaning: "ä»–å‰²ä¼¤äº†æ‰‹æŒ‡"},
            {word: "my his her", meaning: "æˆ‘çš„ ä»–çš„ å¥¹çš„", example: "This is my book, that is his pen, and this is her bag.", exampleMeaning: "è¿™æ˜¯æˆ‘çš„ä¹¦ï¼Œé‚£æ˜¯ä»–çš„é’¢ç¬”ï¼Œè¿™æ˜¯å¥¹çš„åŒ…"},
            {word: "fifth", meaning: "ç¬¬äº”", example: "Today is the fifth of May.", exampleMeaning: "ä»Šå¤©æ˜¯äº”æœˆäº”æ—¥"},
            {word: "library", meaning: "å›¾ä¹¦é¦†", example: "We read books in the library.", exampleMeaning: "æˆ‘ä»¬åœ¨å›¾ä¹¦é¦†çœ‹ä¹¦"},
            {word: "stair", meaning: "æ¥¼æ¢¯", example: "Go up the stairs.", exampleMeaning: "ä¸Šæ¥¼æ¢¯"},
            {word: "floor", meaning: "å±‚", example: "I live on the third floor.", exampleMeaning: "æˆ‘ä½åœ¨ä¸‰æ¥¼"},
            {word: "fourth", meaning: "ç¬¬å››", example: "This is my fourth visit.", exampleMeaning: "è¿™æ˜¯æˆ‘ç¬¬å››æ¬¡æ¥è®¿"},
            {word: "beside", meaning: "åœ¨â€¦â€¦æ—è¾¹", example: "Sit beside me.", exampleMeaning: "ååœ¨æˆ‘æ—è¾¹"},
            {word: "behind", meaning: "åœ¨â€¦â€¦åé¢", example: "The cat is behind the door.", exampleMeaning: "çŒ«åœ¨é—¨åé¢"},
            {word: "find", meaning: "æ‰¾åˆ° å‘ç°", example: "I can't find my keys.", exampleMeaning: "æˆ‘æ‰¾ä¸åˆ°æˆ‘çš„é’¥åŒ™"},
            {word: "right beside", meaning: "æ­£å¥½åœ¨â€¦â€¦æ—è¾¹", example: "The school is right beside the park.", exampleMeaning: "å­¦æ ¡å°±åœ¨å…¬å›­æ—è¾¹"},
            {word: "grey", meaning: "ç°è‰²", example: "The sky is grey today.", exampleMeaning: "ä»Šå¤©å¤©ç©ºæ˜¯ç°è‰²çš„"},
            {word: "drive", meaning: "å¼€è½¦", example: "I can drive a car.", exampleMeaning: "æˆ‘ä¼šå¼€è½¦"},
            {word: "corner", meaning: "è·¯å£", example: "Turn left at the corner.", exampleMeaning: "åœ¨è·¯å£å·¦è½¬"},
            {word: "first", meaning: "ç¬¬ä¸€", example: "This is my first time.", exampleMeaning: "è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€æ¬¡"},
            {word: "second", meaning: "ç¬¬äºŒ", example: "He came in second.", exampleMeaning: "ä»–å¾—äº†ç¬¬äºŒå"},
            {word: "third", meaning: "ç¬¬ä¸‰", example: "She is in third grade.", exampleMeaning: "å¥¹åœ¨ä¸‰å¹´çº§"},
            {word: "fourth", meaning: "ç¬¬å››", example: "This is the fourth time.", exampleMeaning: "è¿™æ˜¯ç¬¬å››æ¬¡äº†"},
            {word: "fifth", meaning: "ç¬¬äº”", example: "He is in fifth place.", exampleMeaning: "ä»–æ’åœ¨ç¬¬äº”ä½"},
            {word: "sixth", meaning: "ç¬¬å…­", example: "Today is the sixth.", exampleMeaning: "ä»Šå¤©æ˜¯å…­å·"},
            {word: "seventh", meaning: "ç¬¬ä¸ƒ", example: "This is the seventh day.", exampleMeaning: "è¿™æ˜¯ç¬¬ä¸ƒå¤©"},
            {word: "eighth", meaning: "ç¬¬å…«", example: "He is in eighth grade.", exampleMeaning: "ä»–åœ¨å…«å¹´çº§"},
            {word: "ninth", meaning: "ç¬¬ä¹", example: "This is the ninth time.", exampleMeaning: "è¿™æ˜¯ç¬¬ä¹æ¬¡äº†"},
            {word: "tenth", meaning: "ç¬¬å", example: "She is in tenth place.", exampleMeaning: "å¥¹æ’åœ¨ç¬¬åä½"},
            {word: "cat", meaning: "çŒ«", example: "The cat is sleeping.", exampleMeaning: "çŒ«åœ¨ç¡è§‰"},
            {word: "dog", meaning: "ç‹—", example: "The dog is barking.", exampleMeaning: "ç‹—åœ¨å«"},
            {word: "pig", meaning: "çŒª", example: "The pig is eating.", exampleMeaning: "çŒªåœ¨åƒä¸œè¥¿"},
            {word: "duck", meaning: "é¸­", example: "The duck is swimming.", exampleMeaning: "é¸­å­åœ¨æ¸¸æ³³"},
            {word: "duckling", meaning: "å°é¸­å­", example: "The duckling is cute.", exampleMeaning: "å°é¸­å­å¾ˆå¯çˆ±"},
            {word: "rabbit", meaning: "å…”å­", example: "The rabbit is jumping.", exampleMeaning: "å…”å­åœ¨è·³"},
            {word: "horse", meaning: "é©¬", example: "The horse is running.", exampleMeaning: "é©¬åœ¨å¥”è·‘"},
            {word: "elephant", meaning: "å¤§è±¡", example: "The elephant is big.", exampleMeaning: "å¤§è±¡å¾ˆå¤§"},
            {word: "ant", meaning: "èš‚èš", example: "The ant is small.", exampleMeaning: "èš‚èšå¾ˆå°"},
            {word: "fish", meaning: "é±¼", example: "The fish is swimming.", exampleMeaning: "é±¼åœ¨æ¸¸æ³³"},
            {word: "bird", meaning: "é¸Ÿ", example: "The bird is flying.", exampleMeaning: "é¸Ÿåœ¨é£"},
            {word: "snake", meaning: "è›‡", example: "The snake is long.", exampleMeaning: "è›‡å¾ˆé•¿"},
            {word: "mouse", meaning: "é¼ ", example: "The mouse is small.", exampleMeaning: "è€é¼ å¾ˆå°"},
            {word: "monkey", meaning: "çŒ´å­", example: "The monkey is clever.", exampleMeaning: "çŒ´å­å¾ˆèªæ˜"},
            {word: "panda", meaning: "ç†ŠçŒ«", example: "The panda is cute.", exampleMeaning: "ç†ŠçŒ«å¾ˆå¯çˆ±"},
            {word: "bear", meaning: "ç†Š", example: "The bear is strong.", exampleMeaning: "ç†Šå¾ˆå¼ºå£®"},
            {word: "lion", meaning: "ç‹®", example: "The lion is the king.", exampleMeaning: "ç‹®å­æ˜¯ç™¾å…½ä¹‹ç‹"},
            {word: "tiger", meaning: "è€è™", example: "The tiger is fierce.", exampleMeaning: "è€è™å¾ˆå‡¶çŒ›"},
            {word: "fox", meaning: "ç‹ç‹¸", example: "The fox is clever.", exampleMeaning: "ç‹ç‹¸å¾ˆèªæ˜"},
            {word: "zebra", meaning: "æ–‘é©¬", example: "The zebra has stripes.", exampleMeaning: "æ–‘é©¬æœ‰æ¡çº¹"},
            {word: "deer", meaning: "é¹¿", example: "The deer is graceful.", exampleMeaning: "é¹¿å¾ˆä¼˜é›…"},
            {word: "sheep", meaning: "ç»µç¾Š", example: "The sheep is fluffy.", exampleMeaning: "ç»µç¾Šæ¯›èŒ¸èŒ¸çš„"},
            {word: "goat", meaning: "å±±ç¾Š", example: "The goat is eating grass.", exampleMeaning: "å±±ç¾Šåœ¨åƒè‰"},
            {word: "cow", meaning: "å¥¶ç‰›", example: "The cow gives milk.", exampleMeaning: "å¥¶ç‰›äº§å¥¶"},
            {word: "shark", meaning: "é²¨é±¼", example: "The shark is dangerous.", exampleMeaning: "é²¨é±¼å¾ˆå±é™©"},
            {word: "parrot", meaning: "é¹¦é¹‰", example: "The parrot can talk.", exampleMeaning: "é¹¦é¹‰ä¼šè¯´è¯"},
            {word: "hamster", meaning: "ä»“é¼ ", example: "The hamster is small.", exampleMeaning: "ä»“é¼ å¾ˆå°"},
            {word: "goldfish", meaning: "é‡‘é±¼", example: "The goldfish is swimming.", exampleMeaning: "é‡‘é±¼åœ¨æ¸¸"},
            {word: "turtle", meaning: "ä¹Œé¾Ÿ", example: "The turtle is slow.", exampleMeaning: "ä¹Œé¾Ÿå¾ˆæ…¢"},
            {word: "foot", meaning: "è„š", example: "My foot hurts.", exampleMeaning: "æˆ‘çš„è„šç–¼"},
            {word: "head", meaning: "å¤´", example: "I have a headache.", exampleMeaning: "æˆ‘å¤´ç—›"},
            {word: "face", meaning: "è„¸", example: "Wash your face.", exampleMeaning: "æ´—è„¸"},
            {word: "hair", meaning: "å¤´å‘", example: "She has long hair.", exampleMeaning: "å¥¹æœ‰é•¿å¤´å‘"},
            {word: "nose", meaning: "é¼»å­", example: "My nose is running.", exampleMeaning: "æˆ‘æµé¼»æ¶•äº†"},
            {word: "mouth", meaning: "å˜´", example: "Open your mouth.", exampleMeaning: "å¼ å¼€å˜´"},
            {word: "eye", meaning: "çœ¼ç›", example: "My eyes are tired.", exampleMeaning: "æˆ‘çš„çœ¼ç›ç´¯äº†"},
            {word: "ear", meaning: "è€³æœµ", example: "My ear hurts.", exampleMeaning: "æˆ‘çš„è€³æœµç–¼"},
            {word: "arm", meaning: "æ‰‹è‡‚", example: "Raise your arm.", exampleMeaning: "ä¸¾èµ·ä½ çš„æ‰‹è‡‚"},
            {word: "hand", meaning: "æ‰‹", example: "Wash your hands.", exampleMeaning: "æ´—æ‰‹"},
            {word: "finger", meaning: "æ‰‹æŒ‡", example: "He cut his finger.", exampleMeaning: "ä»–å‰²ä¼¤äº†æ‰‹æŒ‡"},
            {word: "leg", meaning: "è…¿", example: "My leg is tired.", exampleMeaning: "æˆ‘çš„è…¿ç´¯äº†"},
            {word: "tail", meaning: "å°¾å·´", example: "The dog wags its tail.", exampleMeaning: "ç‹—æ‘‡å°¾å·´"},
            {word: "throat", meaning: "å–‰å’™", example: "My throat is sore.", exampleMeaning: "æˆ‘çš„å–‰å’™ç—›"}
        ];

        // åº”ç”¨çŠ¶æ€
        const state = {
            allWords: [],
            newWords: [],
            reviewWords: [],
            learnedWords: [],
            currentWord: null,
            currentMode: 'learn',
            progress: 0,
            totalWords: 0,
            newWordsPerDay: 10,
            reviewWordsPerDay: 20,
            correctCount: 0,
            autoPlayTimeout: null,
            isDictationPlaying: false,
            recognition: null,
            isListening: false,
            isMobile: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),
            isWeChat: /MicroMessenger/i.test(navigator.userAgent),
            isInAPK: window.location.protocol === 'file:',
            isChrome: /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor),
            isSafari: /Safari/.test(navigator.userAgent) && /Apple Computer/.test(navigator.vendor),
            hasHandledPermission: localStorage.getItem('hasHandledPermission') === 'true',
            permissionRequested: false,
            voiceTimeout: null,
            voiceDuration: 5000 // 5ç§’å½•éŸ³æ—¶é—´
        };

        // DOMå…ƒç´ 
        const elements = {
            welcomeScreen: document.getElementById('welcome-screen'),
            learningScreen: document.getElementById('learning-screen'),
            completionScreen: document.getElementById('completion-screen'),
            wordDisplay: document.getElementById('word-display'),
            meaning: document.getElementById('meaning'),
            example: document.getElementById('example'),
            exampleMeaning: document.getElementById('example-meaning'),
            dictationWordDisplay: document.getElementById('dictation-word-display'),
            dictationMeaning: document.getElementById('dictation-meaning'),
            dictationPlayStatus: document.getElementById('dictation-play-status'),
            dictationInput: document.getElementById('dictation-input'),
            progressBar: document.getElementById('progress-bar'),
            progressText: document.getElementById('progress-text'),
            modeText: document.getElementById('mode-text'),
            learnContent: document.getElementById('learn-content'),
            dictationContent: document.getElementById('dictation-content'),
            dictationResult: document.getElementById('dictation-result'),
            correctAnswer: document.getElementById('correct-answer'),
            newLearnedCount: document.getElementById('new-learned-count'),
            reviewedCount: document.getElementById('reviewed-count'),
            startBtn: document.getElementById('start-btn'),
            nextBtn: document.getElementById('next-btn'),
            speakBtn: document.getElementById('speak-btn'),
            autoPlayBtn: document.getElementById('auto-play-btn'),
            checkSpellingBtn: document.getElementById('check-spelling-btn'),
            restartBtn: document.getElementById('restart-btn'),
            learnBackBtn: document.getElementById('learn-back-btn'),
            dictationBackBtn: document.getElementById('dictation-back-btn'),
            newWordsPerDayInput: document.getElementById('new-words-per-day'),
            reviewWordsPerDayInput: document.getElementById('review-words-per-day'),
            wordLibrarySelect: document.getElementById('word-library'),
            customLibraryContainer: document.getElementById('custom-library-container'),
            customLibraryInput: document.getElementById('custom-library'),
            saveLibraryBtn: document.getElementById('save-library-btn'),
            newWordsCount: document.getElementById('new-words-count'),
            reviewWordsCount: document.getElementById('review-words-count'),
            learnModeBtn: document.getElementById('learn-mode-btn'),
            dictationModeBtn: document.getElementById('dictation-mode-btn'),
            voiceInputBtn: document.getElementById('voice-input-btn'),
            voiceInputStatus: document.getElementById('voice-input-status'),
            voicePermissionError: document.getElementById('voice-permission-error'),
            apkWarning: document.getElementById('apk-warning'),
            apkSolution: document.getElementById('apk-solution'),
            testVoiceBtn: document.getElementById('test-voice-btn'),
            testResult: document.getElementById('test-result'),
            nextGroupBtn: document.getElementById('next-group-btn'),
            completionNextGroupBtn: document.getElementById('completion-next-group-btn'),
            completionBackBtn: document.getElementById('completion-back-btn'),
            checkWordBtn: document.getElementById('check-word-btn'),
            addWordBtn: document.getElementById('add-word-btn'),
            newWordInput: document.getElementById('new-word'),
            newMeaningInput: document.getElementById('new-meaning'),
            newExampleInput: document.getElementById('new-example'),
            newExampleMeaningInput: document.getElementById('new-example-meaning'),
            wordNotice: document.getElementById('word-notice')
        };

        // æ£€æŸ¥APKç¯å¢ƒ
        function checkAPKEnvironment() {
            if(state.isInAPK) {
                elements.apkWarning.classList.remove('hidden');
                elements.apkSolution.classList.remove('hidden');
                
                // æµ‹è¯•è¯­éŸ³åŠŸèƒ½
                elements.testVoiceBtn.addEventListener('click', function() {
                    testVoiceFunctions();
                });
            }
        }

        // æµ‹è¯•è¯­éŸ³åŠŸèƒ½
        function testVoiceFunctions() {
            elements.testResult.innerHTML = "æµ‹è¯•ä¸­...";
            
            // æµ‹è¯•è¯­éŸ³åˆæˆ
            let ttsSuccess = false;
            try {
                if('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance("test");
                    utterance.lang = 'en-US';
                    utterance.rate = 0.8;
                    utterance.onend = function() {
                        ttsSuccess = true;
                        checkTestResult();
                    };
                    speechSynthesis.speak(utterance);
                } else {
                    elements.testResult.innerHTML += "<br>è¯­éŸ³åˆæˆAPIä¸æ”¯æŒ";
                }
            } catch(e) {
                elements.testResult.innerHTML += "<br>è¯­éŸ³åˆæˆé”™è¯¯:" + e.message;
            }
            
            // æµ‹è¯•è¯­éŸ³è¯†åˆ«
            let asrSuccess = false;
            try {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                if(SpeechRecognition) {
                    const recognition = new SpeechRecognition();
                    recognition.lang = 'en-US';
                    recognition.onresult = function() {
                        asrSuccess = true;
                        checkTestResult();
                    };
                    recognition.onerror = function(e) {
                        elements.testResult.innerHTML += "<br>è¯­éŸ³è¯†åˆ«é”™è¯¯:" + e.error;
                    };
                    recognition.start();
                } else {
                    elements.testResult.innerHTML += "<br>è¯­éŸ³è¯†åˆ«APIä¸æ”¯æŒ";
                }
            } catch(e) {
                elements.testResult.innerHTML += "<br>è¯­éŸ³è¯†åˆ«é”™è¯¯:" + e.message;
            }
            
            function checkTestResult() {
                if(ttsSuccess && asrSuccess) {
                    elements.testResult.innerHTML = "âœ“ è¯­éŸ³åŠŸèƒ½æµ‹è¯•é€šè¿‡";
                } else if(ttsSuccess) {
                    elements.testResult.innerHTML = "éƒ¨åˆ†é€šè¿‡: åªèƒ½æœ—è¯»ä¸èƒ½è¯†åˆ«";
                } else if(asrSuccess) {
                    elements.testResult.innerHTML = "éƒ¨åˆ†é€šè¿‡: åªèƒ½è¯†åˆ«ä¸èƒ½æœ—è¯»";
                }
            }
        }

        // åˆå§‹åŒ–è¯­éŸ³è¯†åˆ«
        function initSpeechRecognition() {
            if(state.isInAPK) {
                elements.voiceInputBtn.style.display = 'none';
                return;
            }

            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            
            if (!SpeechRecognition) {
                showPermissionError('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«åŠŸèƒ½');
                elements.voiceInputBtn.style.display = 'none';
                return;
            }

            if(state.isWeChat) {
                elements.voiceInputBtn.style.display = 'none';
                return;
            }

            state.recognition = new SpeechRecognition();
            state.recognition.continuous = false;
            state.recognition.interimResults = false;
            state.recognition.lang = 'en-US';
            
            if(state.isMobile) {
                state.recognition.continuous = true;
            }

            state.recognition.onstart = function() {
                state.isListening = true;
                elements.voiceInputBtn.classList.add('recording');
                elements.voiceInputStatus.textContent = 'æ­£åœ¨è†å¬...';
                
                // è®¾ç½®è‡ªåŠ¨åœæ­¢è®¡æ—¶å™¨
                state.voiceTimeout = setTimeout(() => {
                    stopRecording();
                }, state.voiceDuration);
            };
            
            state.recognition.onresult = function(event) {
                const transcript = event.results[0][0].transcript;
                elements.dictationInput.value = transcript;
                checkSpelling();
            };
            
            state.recognition.onerror = function(event) {
                state.isListening = false;
                elements.voiceInputBtn.classList.remove('recording');
                clearTimeout(state.voiceTimeout);
                
                if(event.error === 'not-allowed') {
                    showPermissionError('éº¦å…‹é£æƒé™è¢«æ‹’ç»ï¼Œè¯·åˆ·æ–°é¡µé¢å¹¶å…è®¸æƒé™');
                } else if(event.error === 'audio-capture') {
                    showPermissionError('æ— æ³•è®¿é—®éº¦å…‹é£ï¼Œè¯·æ£€æŸ¥è®¾å¤‡è®¾ç½®');
                } else if(event.error === 'no-speech') {
                    elements.voiceInputStatus.textContent = 'æœªæ£€æµ‹åˆ°è¯­éŸ³ï¼Œè¯·é‡è¯•';
                    setTimeout(() => {
                        elements.voiceInputStatus.textContent = '';
                    }, 2000);
                } else {
                    elements.voiceInputStatus.textContent = 'è¯†åˆ«é”™è¯¯: ' + event.error;
                    setTimeout(() => {
                        elements.voiceInputStatus.textContent = '';
                    }, 2000);
                }
            };
            
            state.recognition.onend = function() {
                if(state.isListening) {
                    state.isListening = false;
                    elements.voiceInputBtn.classList.remove('recording');
                    clearTimeout(state.voiceTimeout);
                    elements.voiceInputStatus.textContent = 'è¯†åˆ«ç»“æŸ';
                    setTimeout(() => {
                        elements.voiceInputStatus.textContent = '';
                    }, 2000);
                }
            };
        }

        // è®¾ç½®è¯­éŸ³è¾“å…¥æŒ‰é’®
        function setupVoiceInput() {
            const btn = elements.voiceInputBtn;
            
            if(!state.recognition || state.isWeChat || state.isInAPK) {
                btn.style.display = 'none';
                return;
            }
            
            btn.addEventListener('mousedown', startRecording);
            btn.addEventListener('touchstart', startRecording);
            
            btn.addEventListener('mouseup', stopRecording);
            btn.addEventListener('touchend', stopRecording);
            btn.addEventListener('mouseleave', stopRecording);
        }

        // å¼€å§‹å½•éŸ³
        function startRecording(e) {
            e.preventDefault();
            if(state.isListening) return;
            
            elements.voiceInputStatus.textContent = 'å‡†å¤‡ä¸­...';
            elements.dictationInput.value = '';
            
            try {
                state.recognition.start();
            } catch(err) {
                console.error('å¯åŠ¨è¯†åˆ«å¤±è´¥:', err);
                elements.voiceInputStatus.textContent = 'å¯åŠ¨å¤±è´¥ï¼Œè¯·é‡è¯•';
                setTimeout(() => {
                    elements.voiceInputStatus.textContent = '';
                }, 2000);
            }
        }

        // åœæ­¢å½•éŸ³
        function stopRecording(e) {
            if(e) e.preventDefault();
            if(state.isListening) {
                state.recognition.stop();
            }
        }

        // æ˜¾ç¤ºæƒé™é”™è¯¯
        function showPermissionError(message) {
            elements.voicePermissionError.textContent = message;
            elements.voicePermissionError.classList.remove('hidden');
        }

        // æ£€æŸ¥å•è¯æ˜¯å¦å·²å­˜åœ¨
        function checkWordExists() {
            const word = elements.newWordInput.value.trim().toLowerCase();
            if (!word) {
                showWordNotice('è¯·è¾“å…¥è‹±æ–‡å•è¯', 'error');
                return;
            }
            
            const customText = elements.customLibraryInput.value.trim();
            const customWords = customText ? parseCustomLibrary(customText) : [];
            
            const existingWord = [...customWords, ...defaultLibrary].find(w => 
                w.word.toLowerCase() === word
            );
            
            if (existingWord) {
                showWordNotice(`å•è¯å·²å­˜åœ¨: ${existingWord.word} - ${existingWord.meaning}`, 'exists');
                // å¡«å……è¡¨å•ä»¥ä¾¿æ›´æ–°
                elements.newMeaningInput.value = existingWord.meaning;
                elements.newExampleInput.value = existingWord.example || '';
                elements.newExampleMeaningInput.value = existingWord.exampleMeaning || '';
            } else {
                showWordNotice('å•è¯ä¸å­˜åœ¨ï¼Œå¯ä»¥æ·»åŠ ', 'success');
            }
        }
    
        // æ·»åŠ æˆ–æ›´æ–°å•è¯
        function addOrUpdateWord() {
            const word = elements.newWordInput.value.trim();
            const meaning = elements.newMeaningInput.value.trim();
            
            if (!word || !meaning) {
                showWordNotice('è‹±æ–‡å•è¯å’Œä¸­æ–‡é‡Šä¹‰ä¸èƒ½ä¸ºç©º', 'error');
                return;
            }
            
            let customText = elements.customLibraryInput.value.trim();
            let customWords = customText ? parseCustomLibrary(customText) : [];
            
            // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨
            const existingIndex = customWords.findIndex(w => 
                w.word.toLowerCase() === word.toLowerCase()
            );
            
            const newWord = {
                word: word,
                meaning: meaning,
                example: elements.newExampleInput.value.trim(),
                exampleMeaning: elements.newExampleMeaningInput.value.trim()
            };
            
            if (existingIndex >= 0) {
                // æ›´æ–°ç°æœ‰å•è¯
                customWords[existingIndex] = newWord;
                showWordNotice(`å•è¯ "${word}" å·²æ›´æ–°`, 'success');
            } else {
                // æ·»åŠ æ–°å•è¯
                customWords.push(newWord);
                showWordNotice(`å•è¯ "${word}" å·²æ·»åŠ `, 'success');
            }
            
            // æ›´æ–°è‡ªå®šä¹‰è¯åº“æ–‡æœ¬
            const newText = customWords.map(w => 
                `${w.word},${w.meaning},${w.example || ''},${w.exampleMeaning || ''}`
            ).join('\n');
            
            elements.customLibraryInput.value = newText;
            
            // æ¸…ç©ºè¡¨å•
            elements.newWordInput.value = '';
            elements.newMeaningInput.value = '';
            elements.newExampleInput.value = '';
            elements.newExampleMeaningInput.value = '';
            
            // è‡ªåŠ¨ä¿å­˜
            saveCustomLibrary();
        }
    
        // æ˜¾ç¤ºå•è¯é€šçŸ¥
        function showWordNotice(message, type) {
            elements.wordNotice.textContent = message;
            elements.wordNotice.className = '';
            elements.wordNotice.classList.add(type === 'error' ? 'word-exists-notice' : 
                                          type === 'exists' ? 'word-exists-notice' : 'word-added-notice');
            elements.wordNotice.classList.remove('hidden');
            
            // 3ç§’åè‡ªåŠ¨éšè—
            setTimeout(() => {
                elements.wordNotice.classList.add('hidden');
            }, 3000);
        }

        // åˆå§‹åŒ–åº”ç”¨
        function initApp() {
            checkAPKEnvironment();
            
            // ä»æœ¬åœ°å­˜å‚¨åŠ è½½è®¾ç½®
            const savedNewWords = localStorage.getItem('newWordsPerDay');
            const savedReviewWords = localStorage.getItem('reviewWordsPerDay');
            
            state.newWordsPerDay = savedNewWords ? parseInt(savedNewWords) : 10;
            state.reviewWordsPerDay = savedReviewWords ? parseInt(savedReviewWords) : 20;
            
            elements.newWordsPerDayInput.value = state.newWordsPerDay;
            elements.reviewWordsPerDayInput.value = state.reviewWordsPerDay;
            elements.newWordsCount.textContent = state.newWordsPerDay;
            elements.reviewWordsCount.textContent = state.reviewWordsPerDay;
            elements.wordLibrarySelect.value = 'custom';
            
            const savedLibrary = localStorage.getItem('customWordLibrary');
            if(savedLibrary) {
                elements.customLibraryInput.value = savedLibrary;
            } else {
                let exampleText = defaultLibrary.slice(0, 5).map(word => 
                    `${word.word},${word.meaning},${word.example},${word.exampleMeaning}`
                ).join('\n');
                elements.customLibraryInput.value = exampleText;
            }
            
            const savedProgress = localStorage.getItem('learningProgress');
            if(savedProgress) {
                const progress = JSON.parse(savedProgress);
                state.learnedWords = progress.learnedWords || [];
            }
            
            initSpeechRecognition();
            setupVoiceInput();
            
            // äº‹ä»¶ç›‘å¬
            elements.startBtn.addEventListener('click', startLearning);
            elements.nextBtn.addEventListener('click', nextWord);
            elements.speakBtn.addEventListener('click', speakCurrentWord);
            elements.autoPlayBtn.addEventListener('click', autoPlayWord);
            elements.checkSpellingBtn.addEventListener('click', checkSpelling);
            elements.restartBtn.addEventListener('click', restartLearning);
            elements.saveLibraryBtn.addEventListener('click', saveCustomLibrary);
            elements.learnModeBtn.addEventListener('click', () => switchMode('learn'));
            elements.dictationModeBtn.addEventListener('click', () => switchMode('dictation'));
            elements.learnBackBtn.addEventListener('click', backToWelcome);
            elements.dictationBackBtn.addEventListener('click', backToWelcome);
            elements.wordLibrarySelect.addEventListener('change', toggleLibrarySelector);
            elements.nextGroupBtn.addEventListener('click', startNextGroup);
            elements.completionNextGroupBtn.addEventListener('click', startNextGroup);
            elements.completionBackBtn.addEventListener('click', backToWelcome);
            elements.checkWordBtn.addEventListener('click', checkWordExists);
            elements.addWordBtn.addEventListener('click', addOrUpdateWord);
            
            elements.dictationInput.addEventListener('keypress', (e) => {
                if(e.key === 'Enter') {
                    checkSpelling();
                }
            });
            
            elements.newWordsPerDayInput.addEventListener('change', updateSettings);
            elements.reviewWordsPerDayInput.addEventListener('change', updateSettings);
        }

        // å¼€å§‹ä¸‹ä¸€ç»„å•è¯
        function startNextGroup() {
            elements.completionScreen.classList.add('hidden');
            elements.welcomeScreen.classList.remove('hidden');
            startLearning();
        }

        // åˆ‡æ¢è¯åº“é€‰æ‹©å™¨
        function toggleLibrarySelector() {
            const selectedLibrary = elements.wordLibrarySelect.value;
            elements.customLibraryContainer.classList.toggle('hidden', selectedLibrary !== 'custom');
        }

        // è¿”å›æ¬¢è¿ç•Œé¢
        function backToWelcome() {
            clearTimeout(state.autoPlayTimeout);
            clearTimeout(state.voiceTimeout);
            if(state.recognition && state.isListening) {
                state.recognition.stop();
                state.isListening = false;
                elements.voiceInputBtn.classList.remove('recording');
                elements.voiceInputStatus.textContent = '';
            }
            
            elements.learningScreen.classList.add('hidden');
            elements.completionScreen.classList.add('hidden');
            elements.welcomeScreen.classList.remove('hidden');
        }

        // åˆ‡æ¢æ¨¡å¼
        function switchMode(mode) {
            clearTimeout(state.autoPlayTimeout);
            clearTimeout(state.voiceTimeout);
            if(state.recognition && state.isListening) {
                state.recognition.stop();
                state.isListening = false;
                elements.voiceInputBtn.classList.remove('recording');
                elements.voiceInputStatus.textContent = '';
            }
            
            state.currentMode = mode;
            
            elements.learnModeBtn.classList.toggle('active', mode === 'learn');
            elements.dictationModeBtn.classList.toggle('active', mode === 'dictation');
            
            if(mode === 'learn') {
                elements.learnContent.classList.remove('hidden');
                elements.dictationContent.classList.add('hidden');
            } else {
                elements.learnContent.classList.add('hidden');
                elements.dictationContent.classList.remove('hidden');
                elements.dictationInput.value = '';
                autoPlayDictationWord();
            }
        }

        // ä¿å­˜è‡ªå®šä¹‰è¯åº“
        function saveCustomLibrary() {
            const customText = elements.customLibraryInput.value.trim();
            if(customText) {
                localStorage.setItem('customWordLibrary', customText);
                showWordNotice('è‡ªå®šä¹‰è¯åº“å·²ä¿å­˜ï¼', 'success');
            } else {
                showWordNotice('è¯·è¾“å…¥æœ‰æ•ˆçš„è¯åº“å†…å®¹ï¼', 'error');
            }
        }

        // æ›´æ–°è®¾ç½®
        function updateSettings() {
            state.newWordsPerDay = parseInt(elements.newWordsPerDayInput.value) || 10;
            state.reviewWordsPerDay = parseInt(elements.reviewWordsPerDayInput.value) || 20;
            
            localStorage.setItem('newWordsPerDay', state.newWordsPerDay);
            localStorage.setItem('reviewWordsPerDay', state.reviewWordsPerDay);
            
            elements.newWordsCount.textContent = state.newWordsPerDay;
            elements.reviewWordsCount.textContent = state.reviewWordsPerDay;
        }

        // å¼€å§‹å­¦ä¹ 
        function startLearning() {
            updateSettings();
            
            const selectedLibrary = elements.wordLibrarySelect.value;
            
            if(selectedLibrary === 'custom') {
                const customText = elements.customLibraryInput.value.trim();
                state.allWords = customText ? parseCustomLibrary(customText) : [...defaultLibrary];
            } else {
                state.allWords = [...defaultLibrary];
            }
            
            prepareWords();
            
            elements.welcomeScreen.classList.add('hidden');
            elements.learningScreen.classList.remove('hidden');
            
            nextWord();
        }

        // è§£æè‡ªå®šä¹‰è¯åº“
        function parseCustomLibrary(text) {
            const lines = text.split('\n');
            return lines.map(line => {
                const parts = line.split(',');
                if(parts.length >= 4) {
                    return {
                        word: parts[0].trim(),
                        meaning: parts[1].trim(),
                        example: parts[2].trim(),
                        exampleMeaning: parts[3].trim()
                    };
                } else if(parts.length >= 2) {
                    return {
                        word: parts[0].trim(),
                        meaning: parts[1].trim(),
                        example: parts[2] ? parts[2].trim() : "",
                        exampleMeaning: parts[3] ? parts[3].trim() : ""
                    };
                }
                return null;
            }).filter(word => word !== null);
        }

        // å‡†å¤‡å­¦ä¹ å•è¯
        function prepareWords() {
            const unlearnedWords = state.allWords.filter(word => 
                !state.learnedWords.some(learned => learned.word === word.word)
            );
            
            state.newWords = shuffleArray(unlearnedWords).slice(0, state.newWordsPerDay);
            state.reviewWords = shuffleArray([...state.learnedWords]).slice(0, state.reviewWordsPerDay);
            
            state.totalWords = state.newWords.length + state.reviewWords.length;
            state.progress = 0;
            state.correctCount = 0;
            
            updateProgress();
        }

        // ä¸‹ä¸€ä¸ªå•è¯
        function nextWord() {
            clearTimeout(state.autoPlayTimeout);
            clearTimeout(state.voiceTimeout);
            if(state.recognition && state.isListening) {
                state.recognition.stop();
                state.isListening = false;
                elements.voiceInputBtn.classList.remove('recording');
                elements.voiceInputStatus.textContent = '';
            }
            
            state.isDictationPlaying = false;
            elements.dictationPlayStatus.textContent = '';
            elements.correctAnswer.classList.add('hidden');
            
            elements.dictationResult.textContent = '';
            elements.dictationInput.value = '';
            
            if(state.newWords.length > 0) {
                state.currentWord = state.newWords.pop();
                elements.modeText.textContent = 'å­¦ä¹ æ–°å•è¯';
            } else if(state.reviewWords.length > 0) {
                state.currentWord = state.reviewWords.pop();
                elements.modeText.textContent = 'å¤ä¹ å•è¯';
            } else {
                completeLearning();
                return;
            }
            
            displayWord();
            
            state.progress++;
            updateProgress();
            
            if(state.currentMode === 'learn') {
                autoPlayWord();
            } else {
                autoPlayDictationWord();
            }
        }

        // æ˜¾ç¤ºå•è¯
        function displayWord() {
            elements.wordDisplay.textContent = state.currentWord.word;
            elements.meaning.textContent = state.currentWord.meaning;
            elements.example.textContent = state.currentWord.example;
            elements.exampleMeaning.textContent = state.currentWord.exampleMeaning || "";
            
            elements.dictationWordDisplay.textContent = state.currentWord.word;
            elements.dictationMeaning.textContent = state.currentWord.meaning;
        }

        // è‡ªåŠ¨æœ—è¯»å•è¯ï¼ˆå­¦ä¹ æ¨¡å¼ï¼‰
        function autoPlayWord() {
            clearTimeout(state.autoPlayTimeout);
            
            let count = 0;
            const maxCount = 3;
            const delay = 3000;
            
            function play() {
                if(count < maxCount) {
                    speakWord(state.currentWord.word);
                    setTimeout(() => {
                        speakMeaning(state.currentWord.meaning);
                        count++;
                        if(count < maxCount) {
                            state.autoPlayTimeout = setTimeout(play, delay);
                        } else {
                            state.autoPlayTimeout = setTimeout(nextWord, 1500);
                        }
                    }, 1500);
                }
            }
            
            play();
        }

        // è‡ªåŠ¨æœ—è¯»å•è¯ï¼ˆå¬å†™æ¨¡å¼ï¼‰
        function autoPlayDictationWord() {
            clearTimeout(state.autoPlayTimeout);
            
            state.isDictationPlaying = true;
            elements.dictationPlayStatus.textContent = "æ­£åœ¨æœ—è¯»å•è¯...";
            elements.dictationResult.textContent = '';
            elements.correctAnswer.classList.add('hidden');
            
            let count = 0;
            const maxCount = 3;
            const delay = 3000;
            
            function play() {
                if(count < maxCount) {
                    speakWord(state.currentWord.word);
                    setTimeout(() => {
                        speakMeaning(state.currentWord.meaning);
                        count++;
                        if(count < maxCount) {
                            state.autoPlayTimeout = setTimeout(play, delay);
                        } else {
                            state.isDictationPlaying = false;
                            elements.dictationPlayStatus.textContent = "è¯·æ‹¼å†™å•è¯";
                            setTimeout(() => {
                                elements.dictationInput.focus();
                            }, 300);
                        }
                    }, 1500);
                }
            }
            
            play();
        }

        // æœ—è¯»å½“å‰å•è¯ï¼ˆå•æ¬¡ï¼‰
        function speakCurrentWord() {
            speakWord(state.currentWord.word);
            setTimeout(() => {
                speakMeaning(state.currentWord.meaning);
            }, 1500);
        }

        // æœ—è¯»å•è¯ - æ”¹è¿›ç‰ˆ
        function speakWord(text) {
            if('speechSynthesis' in window) {
                try {
                    speechSynthesis.cancel();
                    
                    // è·å–æ‰€æœ‰å¯ç”¨è¯­éŸ³
                    const voices = window.speechSynthesis.getVoices();
                    
                    // ä¼˜å…ˆé€‰æ‹©æ›´è‡ªç„¶çš„è‹±è¯­è¯­éŸ³
                    let voice = voices.find(v => 
                        v.lang.includes('en') && 
                        (v.name.includes('Google') || v.name.includes('Microsoft') || v.name.includes('Alex'))
                    );
                    
                    // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä¼˜é€‰è¯­éŸ³ï¼Œåˆ™é€‰æ‹©ç¬¬ä¸€ä¸ªè‹±è¯­è¯­éŸ³
                    if(!voice) {
                        voice = voices.find(v => v.lang.includes('en'));
                    }
                    
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'en-US';
                    utterance.rate = 0.8; // å‡æ…¢è¯­é€Ÿ
                    utterance.pitch = 1.0;
                    
                    if(voice) {
                        utterance.voice = voice;
                    }
                    
                    speechSynthesis.speak(utterance);
                } catch(e) {
                    console.error('è¯­éŸ³åˆæˆé”™è¯¯:', e);
                    if(state.isInAPK) {
                        elements.testResult.innerHTML += "<br>è¯­éŸ³åˆæˆå¤±è´¥ï¼Œè¯·æ£€æŸ¥APKé…ç½®";
                    }
                }
            } else if(state.isInAPK) {
                elements.testResult.innerHTML += "<br>è¯­éŸ³åˆæˆAPIä¸å¯ç”¨";
            }
        }

        // æœ—è¯»ä¸­æ–‡æ„æ€
        function speakMeaning(text) {
            if('speechSynthesis' in window && text) {
                try {
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'zh-CN';
                    utterance.rate = 0.9;
                    speechSynthesis.speak(utterance);
                } catch(e) {
                    console.error('è¯­éŸ³åˆæˆé”™è¯¯:', e);
                }
            }
        }

        // æ£€æŸ¥æ‹¼å†™
        function checkSpelling() {
            if(state.isDictationPlaying) return;
            
            const userInput = elements.dictationInput.value.trim().toLowerCase();
            const correctWord = state.currentWord.word.toLowerCase();
            
            elements.correctAnswer.innerHTML = `
                <div>æ­£ç¡®æ‹¼å†™: <strong>${state.currentWord.word}</strong></div>
                <div>ä¸­æ–‡æ„æ€: ${state.currentWord.meaning}</div>
            `;
            elements.correctAnswer.classList.remove('hidden');
            
            const isCorrect = userInput === correctWord;
            
            if(isCorrect) {
                elements.dictationResult.textContent = 'âœ“ æ‹¼å†™æ­£ç¡®ï¼';
                elements.dictationResult.style.color = '#2ecc71';
                
                if(!state.learnedWords.some(w => w.word === state.currentWord.word)) {
                    state.learnedWords.push(state.currentWord);
                    saveProgress();
                }
                
                setTimeout(nextWord, 1500);
            } else {
                elements.dictationResult.textContent = 'âœ— æ‹¼å†™é”™è¯¯';
                elements.dictationResult.style.color = '#e74c3c';
                
                setTimeout(nextWord, 2000);
            }
        }

        // æ›´æ–°è¿›åº¦æ¡
        function updateProgress() {
            const percent = (state.progress / state.totalWords) * 100;
            elements.progressBar.style.width = `${percent}%`;
            elements.progressText.textContent = `${state.progress}/${state.totalWords}`;
        }

        // å®Œæˆå­¦ä¹ 
        function completeLearning() {
            saveProgress();
            
            elements.newLearnedCount.textContent = state.newWordsPerDay - state.newWords.length;
            elements.reviewedCount.textContent = state.reviewWordsPerDay - state.reviewWords.length;
            
            elements.learningScreen.classList.add('hidden');
            elements.completionScreen.classList.remove('hidden');
        }

        // ä¿å­˜è¿›åº¦
        function saveProgress() {
            const progress = {
                learnedWords: state.learnedWords,
                lastLearnedDate: new Date().toISOString()
            };
            localStorage.setItem('learningProgress', JSON.stringify(progress));
        }

        // é‡æ–°å¼€å§‹
        function restartLearning() {
            elements.completionScreen.classList.add('hidden');
            elements.learningScreen.classList.remove('hidden');
            nextWord();
        }

        // æ‰“ä¹±æ•°ç»„é¡ºåº
        function shuffleArray(array) {
            const newArray = [...array];
            for(let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', function() {
            // ç­‰å¾…è¯­éŸ³åˆ—è¡¨åŠ è½½
            speechSynthesis.onvoiceschanged = function() {
                initApp();
            };
            
            // å¦‚æœè¯­éŸ³åˆ—è¡¨å·²ç»åŠ è½½
            if(speechSynthesis.getVoices().length > 0) {
                initApp();
            } else {
                // æœ‰äº›æµè§ˆå™¨éœ€è¦å…ˆè°ƒç”¨ä¸€æ¬¡getVoices
                speechSynthesis.getVoices();
                setTimeout(initApp, 500);
            }
        });
    </script>
</body>
</html>
